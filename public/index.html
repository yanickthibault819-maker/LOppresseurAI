<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>L'Oppresseur AI â€” v2.2 stable (Vercel)</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">Lâ€™Oppresseur AI</div>
      <div class="subtitle">v2.2 stable â€” ui cuir/or + api multi-providers</div>
    </div>
    <div class="status" id="serverStatus">serveur: â€¦</div>
  </header>

  <nav class="tabs" role="tablist">
    <button class="tab active" data-tab="generator" role="tab">ğŸ”¥ gÃ©nÃ©rateur</button>
    <button class="tab" data-tab="api" role="tab">ğŸ”‘ api</button>
    <button class="tab" data-tab="help" role="tab">ğŸ“˜ aide</button>
  </nav>

  <main class="panel">
    <section class="tabpage active" id="tab-generator" role="tabpanel">
      <div class="grid2">
        <div class="card">
          <h2>paramÃ¨tres</h2>

          <label>provider</label>
          <select id="providerSelect">
            <option value="gemini">gemini</option>
            <option value="openai">openai</option>
            <option value="claude">claude</option>
          </select>

          <label>model (uniquement modÃ¨les testÃ©s)</label>
          <select id="modelSelect" disabled>
            <option>â€” va dans ğŸ”‘ api pour tester â€”</option>
          </select>

          <label>prompt (dÃ©mo)</label>
          <textarea id="prompt" rows="7">Ã©cris une stratÃ©gie de chanson en 8 lignes, puis un couplet de 8 lignes.</textarea>

          <div class="row">
            <button id="btnGenerate" class="primary">gÃ©nÃ©rer</button>
            <button id="btnClear">effacer</button>
          </div>

          <div class="hint">
            note: en production, les clÃ©s sont dÃ©finies dans les variables dâ€™environnement vercel (pas sauvegardÃ©es dans le navigateur).
          </div>
        </div>

        <div class="card">
          <h2>rÃ©sultat</h2>
          <div class="out-toolbar">
            <button id="btnCopy">copier</button>
          </div>
          <pre id="output" class="output"></pre>
        </div>
      </div>
    </section>

    <section class="tabpage" id="tab-api" role="tabpanel">
      <div class="grid2">
        <div class="card">
          <h2>tests de clÃ©s & modÃ¨les</h2>
          <div class="hint" id="prodHint">
            en ligne (vercel), ajoute tes clÃ©s dans <b>Project Settings â†’ Environment Variables</b>.
            lâ€™app va dÃ©tecter les modÃ¨les disponibles et te les proposer dans ğŸ”¥ gÃ©nÃ©rateur.
          </div>

          <div class="apiCard">
            <h3>gemini</h3>
            <div class="row">
              <input id="geminiKey" class="keyInput" type="password" placeholder="(local seulement) colle ta clÃ© gemini ici" />
              <button data-provider="gemini" class="btnTest">tester</button>
            </div>
            <div class="small" id="geminiStatus">â€”</div>
            <div class="models" id="geminiModels"></div>
          </div>

          <div class="apiCard">
            <h3>openai</h3>
            <div class="row">
              <input id="openaiKey" class="keyInput" type="password" placeholder="(local seulement) colle ta clÃ© openai ici" />
              <button data-provider="openai" class="btnTest">tester</button>
            </div>
            <div class="small" id="openaiStatus">â€”</div>
            <div class="models" id="openaiModels"></div>
          </div>

          <div class="apiCard">
            <h3>claude</h3>
            <div class="row">
              <input id="claudeKey" class="keyInput" type="password" placeholder="(local seulement) colle ta clÃ© anthropic ici" />
              <button data-provider="claude" class="btnTest">tester</button>
            </div>
            <div class="small" id="claudeStatus">â€”</div>
            <div class="models" id="claudeModels"></div>
          </div>

          <div class="hint">
            <b>local dev:</b> lance le serveur local (voir README) pour tester avec des clÃ©s en <code>server-local/.env</code>.
            <br/>
            <b>vercel:</b> pas dâ€™Ã©criture de fichiers secrets cÃ´tÃ© serveur â†’ utilise les env vars.
          </div>
        </div>

        <div class="card">
          <h2>modÃ¨les dÃ©tectÃ©s</h2>
          <p class="small">ce panneau reflÃ¨te ce que le serveur considÃ¨re comme â€œutilisableâ€.</p>
          <pre id="modelsCache" class="output"></pre>
          <div class="row">
            <button id="btnRefreshCache">rafraÃ®chir</button>
          </div>
        </div>
      </div>
    </section>

    <section class="tabpage" id="tab-help" role="tabpanel">
      <div class="card">
        <h2>aide rapide</h2>
        <ol>
          <li>dÃ©ploie sur vercel via github (voir <b>INSTRUCTIONS_VERCEL_GITHUB.txt</b> dans le zip).</li>
          <li>dans vercel: Project Settings â†’ Environment Variables:
            <ul>
              <li><code>GEMINI_API_KEY</code></li>
              <li><code>OPENAI_API_KEY</code></li>
              <li><code>ANTHROPIC_API_KEY</code></li>
            </ul>
          </li>
          <li>retourne dans lâ€™onglet ğŸ”‘ api et clique â€œtesterâ€.</li>
          <li>dans ğŸ”¥ gÃ©nÃ©rateur, choisis provider + model, puis gÃ©nÃ¨re.</li>
        </ol>
      </div>
    </section>
  </main>

  <footer class="footer">Lâ€™Oppresseur AI â€” build vercel-ready</footer>
  <script src="/app.js"></script>
</body>
</html>
