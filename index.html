<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>L'OppresseurAI ‚Äî Full (Gemini ‚Ä¢ Vercel)</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="mark">üî•</div>
      <div class="brandtxt">
        <div class="title">l'oppresseurai</div>
        <div class="subtitle">full ‚Ä¢ gemini api ‚Ä¢ vercel ‚Ä¢ library illimit√©e (indexeddb)</div>
      </div>
    </div>

    <nav class="tabs" aria-label="Navigation">
      <button class="tab is-active" data-tab="gen">g√©n√©rateur</button>
      <button class="tab" data-tab="lib">biblioth√®que</button>
      <button class="tab" data-tab="tpl">templates</button>
      <button class="tab" data-tab="edit">√©diteur</button>
      <button class="tab" data-tab="cmp">comparaison</button>
      <button class="tab" data-tab="stats">stats</button>
    </nav>

    <div class="rightbar">
      <select id="themeSelect" class="select small" title="Th√®me visuel">
        <option value="classic">classic</option>
        <option value="ice">ice</option>
        <option value="blood">blood</option>
      </select>

      <button id="btnModels" class="btn secondary small">charger mod√®les</button>
      <span id="keyStatus" class="pill">cl√©: non test√©e</span>
    </div>
  </header>

  <main class="wrap">
    <!-- GENERATOR -->
    <section class="panel is-active" id="panel-gen">
      <div class="grid2">
        <div class="card">
          <div class="cardhead">
            <h2>configuration</h2>
            <div class="minihelp">raccourcis: <kbd>ctrl</kbd>+<kbd>enter</kbd> g√©n√©rer ‚Ä¢ <kbd>ctrl</kbd>+<kbd>k</kbd> recherche</div>
          </div>

          <label class="label">th√®me / message</label>
          <textarea id="g_theme" class="textarea" rows="7" placeholder="d√©cris le sujet, le concept, l'√©motion, les sc√®nes, le message‚Ä¶"></textarea>

          <div class="row">
            <div class="col">
              <label class="label">structure</label>
              <select id="g_structure" class="select">
                <option value="classic">classic (intro + verse1 + hook + verse2 + hook + verse3 + hook + outro)</option>
                <option value="story">story (intro + verse1 + verse2 + hook + verse3 + outro)</option>
                <option value="minimal">minimal (verse1 + hook + verse2 + hook)</option>
                <option value="cypher">cypher (verse1 + verse2 + verse3)</option>
              </select>
            </div>
            <div class="col">
              <label class="label">intensit√© √©motionnelle</label>
              <select id="g_intensity" class="select">
                <option value="balanced">balanced</option>
                <option value="cold">cold / lucide</option>
                <option value="heavy">heavy / visc√©ral</option>
                <option value="uplift">uplift / r√©silience</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <label class="label">style d'√©criture</label>
              <select id="g_style" class="select">
                <option value="lucid">lucide, direct, observations, z√©ro remplissage</option>
                <option value="street-clean">qu√©bec street clean, dope, naturel, sans clich√©s</option>
                <option value="cinematic">cin√©matique, sc√®nes concr√®tes, d√©tails r√©els</option>
                <option value="attack-narc">direct & tranchant (sans menace), d√©monte la manipulation</option>
              </select>
            </div>
            <div class="col">
              <label class="label">mode</label>
              <select id="g_mode" class="select">
                <option value="two-pass">g√©n√©ration 2 passes (strat√©gie ‚Üí √©criture)</option>
                <option value="one-pass">g√©n√©ration 1 passe (rapide)</option>
                <option value="freestyle">freestyle (id√©e al√©atoire + √©criture)</option>
              </select>
            </div>
          </div>

          <label class="label">mod√®le gemini valid√©</label>
          <select id="g_model" class="select">
            <option value="">(clique ‚Äúcharger mod√®les‚Äù)</option>
          </select>

          <div class="row">
            <div class="col">
              <label class="label">session studio (projet)</label>
              <input id="g_project" class="input" placeholder="ex: album ‚Ä¢ tracklist ‚Ä¢ id√©es" />
            </div>
            <div class="col">
              <label class="label">track</label>
              <input id="g_track" class="input" placeholder="ex: track 03 ‚Ä¢ hook A" />
            </div>
          </div>

          <div class="row">
            <div class="col">
              <button id="btnGenerate" class="btn primary full">g√©n√©rer</button>
            </div>
            <div class="col">
              <button id="btnSaveDraft" class="btn secondary full">sauver en biblioth√®que</button>
            </div>
          </div>

          <p class="hint">
            ici les appels API passent par <code>/api/models</code> et <code>/api/generate</code>.
            ta cl√© reste c√¥t√© serveur (vercel).
          </p>
        </div>

        <div class="card">
          <div class="cardhead">
            <h2>r√©sultat</h2>
            <div class="tools">
              <button id="btnCopy" class="btn small">copier</button>
              <button id="btnToEditor" class="btn small secondary">ouvrir dans l'√©diteur</button>
              <button id="btnExportTxt" class="btn small secondary">export .txt</button>
              <button id="btnExportJson" class="btn small secondary">export .json</button>
            </div>
          </div>

          <pre id="g_output" class="output">pr√™t.</pre>
          <div class="divider"></div>

          <div class="achievements">
            <div class="achhead">
              <h3>achievements</h3>
              <span id="achCount" class="muted">0/10</span>
            </div>
            <div id="achList" class="achlist"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- LIBRARY -->
    <section class="panel" id="panel-lib">
      <div class="card">
        <div class="cardhead">
          <h2>biblioth√®que</h2>
          <div class="tools">
            <input id="libSearch" class="input small" placeholder="rechercher (ctrl+k)" />
            <select id="libFilterProject" class="select small"></select>
            <select id="libSort" class="select small">
              <option value="new">plus r√©cent</option>
              <option value="old">plus ancien</option>
              <option value="az">a‚Üíz</option>
              <option value="za">z‚Üía</option>
            </select>
            <button id="btnLibExport" class="btn small secondary">export s√©lection</button>
          </div>
        </div>

        <div class="libgrid">
          <div class="list" id="libList"></div>
          <div class="detail">
            <div class="detailhead">
              <div>
                <div id="libTitle" class="detailtitle">s√©lectionne un item</div>
                <div id="libMeta" class="detailmeta muted"></div>
              </div>
              <div class="tools">
                <button id="btnOpenEditor" class="btn small">√©diter</button>
                <button id="btnAddCompareA" class="btn small secondary">comparaison A</button>
                <button id="btnAddCompareB" class="btn small secondary">comparaison B</button>
                <button id="btnDeleteItem" class="btn small danger">supprimer</button>
              </div>
            </div>
            <pre id="libText" class="output short">...</pre>
          </div>
        </div>
      </div>
    </section>

    <!-- TEMPLATES -->
    <section class="panel" id="panel-tpl">
      <div class="card">
        <div class="cardhead">
          <h2>templates (30+)</h2>
          <div class="minihelp">clique un template ‚Üí il remplit le g√©n√©rateur</div>
        </div>
        <div id="tplGrid" class="tplgrid"></div>
      </div>
    </section>

    <!-- EDITOR -->
    <section class="panel" id="panel-edit">
      <div class="card">
        <div class="cardhead">
          <h2>√©diteur</h2>
          <div class="tools">
            <button id="btnEditorSave" class="btn small primary">sauver (ctrl+s)</button>
            <button id="btnEditorDup" class="btn small secondary">dupliquer</button>
            <button id="btnEditorExportTxt" class="btn small secondary">export .txt</button>
            <button id="btnEditorExportJson" class="btn small secondary">export .json</button>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <label class="label">titre</label>
            <input id="e_title" class="input" placeholder="titre court" />
          </div>
          <div class="col">
            <label class="label">projet</label>
            <input id="e_project" class="input" placeholder="session studio / projet" />
          </div>
          <div class="col">
            <label class="label">track</label>
            <input id="e_track" class="input" placeholder="track" />
          </div>
        </div>

        <label class="label">texte</label>
        <textarea id="e_text" class="textarea" rows="18" placeholder="paroles‚Ä¶"></textarea>

        <p class="hint">tips: garde des lignes multiples de 4 quand tu veux que suno suive mieux.</p>
      </div>
    </section>

    <!-- COMPARISON -->
    <section class="panel" id="panel-cmp">
      <div class="card">
        <div class="cardhead">
          <h2>comparaison c√¥te √† c√¥te</h2>
          <div class="tools">
            <button id="btnSwap" class="btn small secondary">swap</button>
            <button id="btnClearCompare" class="btn small danger">clear</button>
          </div>
        </div>

        <div class="cmpgrid">
          <div class="cmpcol">
            <div class="cmptitle" id="cmpTitleA">A: vide</div>
            <pre class="output short" id="cmpTextA">...</pre>
          </div>
          <div class="cmpcol">
            <div class="cmptitle" id="cmpTitleB">B: vide</div>
            <pre class="output short" id="cmpTextB">...</pre>
          </div>
        </div>
      </div>
    </section>

    <!-- STATS -->
    <section class="panel" id="panel-stats">
      <div class="grid2">
        <div class="card">
          <h2>dashboard</h2>
          <div class="statgrid" id="statGrid"></div>
          <div class="divider"></div>
          <h3>achievements</h3>
          <div id="achList2" class="achlist"></div>
        </div>

        <div class="card">
          <h2>session studio</h2>
          <div id="projectsList" class="projects"></div>
          <p class="hint">cr√©e un projet dans le g√©n√©rateur (session studio) et sauvegarde quelques tracks.</p>
        </div>
      </div>
    </section>
  </main>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script src="/app.js"></script>
</body>
</html>
